# 代码编写与提交规范

## 1. 代码编写规范

### 1.1. 代码风格
- **缩进**：Tab统一为4个空格。
- **命名规则**：
  - 变量、函数和方法名称使用 `camelCase`（例如：`detectPose`、`imageData`）。
  - 类和枚举名称使用 `PascalCase`（例如：`HumanPoseDetector`、`PoseResult`）。
  - 常量名称使用 `UPPER_CASE`（例如：`MAX_FRAME_RATE`）。
- **注释**：
  - 函数、类和重要代码块应有简洁的注释，解释其功能和目的。
  - 复杂的业务逻辑或计算部分需要详细注释，方便他人理解。
  - 使用 `//` 进行文档注释，为类和方法提供描述性注释。
- **避免魔法数字**：避免在代码中直接使用数字，应将其提取为常量或变量。
- **分文件模块化**：
  - 按功能模块分割文件，例如：`pose_detection.dart`、`camera_service.dart`、`image_processing.dart` 等。
  - 每个文件和类应承担单一责任，遵循 SOLID 原则。

### 1.2. 代码质量
- **异常处理**：适当使用 `try-catch` 语句来处理可能发生的异常，特别是在与外部资源（如摄像头、MediaPipe API）交互时。
- **性能优化**：避免不必要的渲染更新，合理使用 `async/await` 来提高性能，避免 UI 阻塞。
- **内存管理**：确保适时释放资源，避免内存泄漏，特别是在图像处理和流媒体数据处理中。
- **依赖管理**：尽量使用稳定的第三方库，避免过多的依赖，并定期更新依赖项。

### 1.3. 测试
- **单元测试**：为关键函数编写单元测试，尤其是涉及人体检测和图像处理的算法。
- **集成测试**：测试整体功能流程，包括摄像头输入、图像处理和显示结果。
- **UI 测试**：使用 `flutter_test` 进行UI界面的自动化测试，确保用户交互正常。

## 2. 代码提交规范

### 2.1. 提交消息格式
每次提交应包含简洁而清晰的提交信息，遵循以下格式：

[功能模块] [简要描述] (#issueId)

例如：
- `[PoseDetection] Add pose detection logic (#123)`
- `[Camera] Fix camera initialization bug (#124)`

### 2.2. 提交信息规范
- **简明扼要**：提交消息应简短而有意义，最大限制 50 个字符。
- **动词使用**：使用现在时动词（如：Add, Fix, Refactor, Remove）。
- **正文部分**：如果提交较复杂，正文部分可以提供更多背景信息和改动的详细描述。每行不超过 72 个字符。
- **关联 Issue**：如果提交与某个 Issue 相关，确保在提交信息中引用相应的 Issue 编号（例如：`(#123)`）。

### 2.3. 提交频率
- **原子提交**：每次提交应聚焦于一个特定的任务或 bug 修复，避免一次提交多个功能的更改。
- **及时提交**：遇到阶段性完成的功能或修复时，应及时提交代码，避免长时间不提交，保持提交频率。

### 2.4. 代码审查
- 提交后，确保每次代码审查都经过至少一个团队成员的检查，确保代码质量。
- 在代码审查中，重点检查：
  - 逻辑是否清晰，功能是否符合预期。
  - 异常处理是否完善，错误是否被捕捉。
  - 代码的可读性和可维护性。
  - 是否有潜在的性能问题或内存泄漏风险。

### 2.5. 分支管理
- **主分支（`main`）**：主分支应保持可运行状态，只有通过审查和测试的代码才能合并到主分支。
- **特性分支（`feature/`）**：每个新功能或 bug 修复应创建独立的分支，命名为 `feature/<功能名>` 或 `fix/<问题描述>`，确保开发过程中的代码独立性。
- **合并策略**：使用 Git 提交前进行合并测试，确保没有冲突，且代码集成后不会破坏已有功能。
